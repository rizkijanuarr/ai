<!-- Video Background Component -->
<div class="video-background" id="videoBackground">
    <iframe id="youtubeVideo"
        src="https://www.youtube.com/embed/Q7aV_ZhKWb4?autoplay=1&mute=1&loop=1&playlist=Q7aV_ZhKWb4&controls=0&showinfo=0&rel=0&modestbranding=1&vq=hd1080"
        frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
</div>

<script>
    // Video caching - load video hanya sekali
    (function () {
        console.log('ğŸ¬ ========== VIDEO BACKGROUND SYSTEM ==========');

        // Cek URL video untuk memastikan 1080p
        const youtubeVideo = document.getElementById('youtubeVideo');
        const videoSrc = youtubeVideo.getAttribute('src');
        const is1080p = videoSrc.includes('vq=hd1080');

        console.log('ğŸ“¹ Video Quality Check:');
        console.log(`   âœ“ Video URL: ${videoSrc}`);
        console.log(`   âœ“ 1080p Enabled: ${is1080p ? 'âœ… YES' : 'âŒ NO'}`);
        console.log(`   âœ“ Quality Parameter: ${is1080p ? 'vq=hd1080' : 'Not Set'}`);

        // Cek cache status
        const videoLoaded = localStorage.getItem('videoLoaded');
        const videoLoadedTime = localStorage.getItem('videoLoadedTime');
        const videoBackground = document.getElementById('videoBackground');

        console.log('\nğŸ’¾ Cache Status Check:');
        console.log(`   âœ“ localStorage Key: 'videoLoaded'`);
        console.log(`   âœ“ Cache Status: ${videoLoaded === 'true' ? 'âœ… CACHED' : 'âŒ NOT CACHED'}`);
        console.log(`   âœ“ Cache Value: ${videoLoaded || 'null'}`);
        if (videoLoadedTime) {
            console.log(`   âœ“ Last Cached: ${videoLoadedTime}`);
        }

        // Tentukan sumber loading
        if (videoLoaded === 'true') {
            console.log('\nğŸ”„ Loading Source:');
            console.log('   âœ“ Source: ğŸ“¦ LOADED FROM CACHE');
            console.log('   âœ“ Action: Video already cached, using existing iframe');
            console.log('   âœ“ Benefit: Faster loading, reduced bandwidth');
            console.log('   âœ“ Note: Video will autoplay normally');
        } else {
            console.log('\nğŸŒ Loading Source:');
            console.log('   âœ“ Source: ğŸ†• FRESH LOAD FROM YOUTUBE');
            console.log('   âœ“ Action: First time loading video');
            console.log('   âœ“ Next Visit: Will use cached version');
        }

        // Set flag bahwa video sudah di-load
        window.addEventListener('load', function () {
            const wasCached = localStorage.getItem('videoLoaded') === 'true';
            const currentTime = new Date().toLocaleString('id-ID');

            localStorage.setItem('videoLoaded', 'true');
            localStorage.setItem('videoLoadedTime', currentTime);

            console.log('\nğŸ’¾ Cache Save Status:');
            console.log(`   âœ“ Cache Saved: âœ… YES`);
            console.log(`   âœ“ Timestamp: ${currentTime}`);
            console.log(`   âœ“ Previous State: ${wasCached ? 'Already Cached' : 'Newly Cached'}`);
            console.log('   âœ“ Next Visit: Video will load from cache');

            console.log('\nğŸ¬ ============================================\n');
        });
    })();
</script>
